import{u as f,x as tt,T as it,l as U,d as N,t as et,k as rt,A as nt,y as O}from"./index-BXnEnTBW.js";import{u as D,H as P}from"./index-DfRxaFia.js";function ot({isDark:i=!1}){return f("svg",{className:`w-4 h-4 ${i?"text-black":"text-gray-500"}`,"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:f("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})})}var st=Symbol.for("preact-signals");function E(){if(v>1)v--;else{for(var i,t=!1;S!==void 0;){var e=S;for(S=void 0,I++;e!==void 0;){var r=e.o;if(e.o=void 0,e.f&=-3,!(8&e.f)&&F(e))try{e.c()}catch(a){t||(i=a,t=!0)}e=r}}if(I=0,v--,t)throw i}}function at(i){if(v>0)return i();v++;try{return i()}finally{E()}}var o=void 0;function q(i){var t=o;o=void 0;try{return i()}finally{o=t}}var S=void 0,v=0,I=0,$=0;function j(i){if(o!==void 0){var t=i.n;if(t===void 0||t.t!==o)return t={i:0,S:i,p:o.s,n:void 0,t:o,e:void 0,x:void 0,r:t},o.s!==void 0&&(o.s.n=t),o.s=t,i.n=t,32&o.f&&i.S(t),t;if(t.i===-1)return t.i=0,t.n!==void 0&&(t.n.p=t.p,t.p!==void 0&&(t.p.n=t.n),t.p=o.s,t.n=void 0,o.s.n=t,o.s=t),t}}function l(i,t){this.v=i,this.i=0,this.n=void 0,this.t=void 0,this.W=t?.watched,this.Z=t?.unwatched,this.name=t?.name}l.prototype.brand=st;l.prototype.h=function(){return!0};l.prototype.S=function(i){var t=this,e=this.t;e!==i&&i.e===void 0&&(i.x=e,this.t=i,e!==void 0?e.e=i:q(function(){var r;(r=t.W)==null||r.call(t)}))};l.prototype.U=function(i){var t=this;if(this.t!==void 0){var e=i.e,r=i.x;e!==void 0&&(e.x=r,i.e=void 0),r!==void 0&&(r.e=e,i.x=void 0),i===this.t&&(this.t=r,r===void 0&&q(function(){var a;(a=t.Z)==null||a.call(t)}))}};l.prototype.subscribe=function(i){var t=this;return b(function(){var e=t.value,r=o;o=void 0;try{i(e)}finally{o=r}},{name:"sub"})};l.prototype.valueOf=function(){return this.value};l.prototype.toString=function(){return this.value+""};l.prototype.toJSON=function(){return this.value};l.prototype.peek=function(){var i=o;o=void 0;try{return this.value}finally{o=i}};Object.defineProperty(l.prototype,"value",{get:function(){var i=j(this);return i!==void 0&&(i.i=this.i),this.v},set:function(i){if(i!==this.v){if(I>100)throw new Error("Cycle detected");this.v=i,this.i++,$++,v++;try{for(var t=this.t;t!==void 0;t=t.x)t.t.N()}finally{E()}}}});function k(i,t){return new l(i,t)}function F(i){for(var t=i.s;t!==void 0;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return!0;return!1}function M(i){for(var t=i.s;t!==void 0;t=t.n){var e=t.S.n;if(e!==void 0&&(t.r=e),t.S.n=t,t.i=-1,t.n===void 0){i.s=t;break}}}function Q(i){for(var t=i.s,e=void 0;t!==void 0;){var r=t.p;t.i===-1?(t.S.U(t),r!==void 0&&(r.n=t.n),t.n!==void 0&&(t.n.p=r)):e=t,t.S.n=t.r,t.r!==void 0&&(t.r=void 0),t=r}i.s=e}function y(i,t){l.call(this,void 0),this.x=i,this.s=void 0,this.g=$-1,this.f=4,this.W=t?.watched,this.Z=t?.unwatched,this.name=t?.name}y.prototype=new l;y.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===$))return!0;if(this.g=$,this.f|=1,this.i>0&&!F(this))return this.f&=-2,!0;var i=o;try{M(this),o=this;var t=this.x();(16&this.f||this.v!==t||this.i===0)&&(this.v=t,this.f&=-17,this.i++)}catch(e){this.v=e,this.f|=16,this.i++}return o=i,Q(this),this.f&=-2,!0};y.prototype.S=function(i){if(this.t===void 0){this.f|=36;for(var t=this.s;t!==void 0;t=t.n)t.S.S(t)}l.prototype.S.call(this,i)};y.prototype.U=function(i){if(this.t!==void 0&&(l.prototype.U.call(this,i),this.t===void 0)){this.f&=-33;for(var t=this.s;t!==void 0;t=t.n)t.S.U(t)}};y.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var i=this.t;i!==void 0;i=i.x)i.t.N()}};Object.defineProperty(y.prototype,"value",{get:function(){if(1&this.f)throw new Error("Cycle detected");var i=j(this);if(this.h(),i!==void 0&&(i.i=this.i),16&this.f)throw this.v;return this.v}});function G(i,t){return new y(i,t)}function Z(i){var t=i.u;if(i.u=void 0,typeof t=="function"){v++;var e=o;o=void 0;try{t()}catch(r){throw i.f&=-2,i.f|=8,R(i),r}finally{o=e,E()}}}function R(i){for(var t=i.s;t!==void 0;t=t.n)t.S.U(t);i.x=void 0,i.s=void 0,Z(i)}function ft(i){if(o!==this)throw new Error("Out-of-order effect");Q(this),o=i,this.f&=-2,8&this.f&&R(this),E()}function m(i,t){this.x=i,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32,this.name=t?.name}m.prototype.c=function(){var i=this.S();try{if(8&this.f||this.x===void 0)return;var t=this.x();typeof t=="function"&&(this.u=t)}finally{i()}};m.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,Z(this),M(this),v++;var i=o;return o=this,ft.bind(this,i)};m.prototype.N=function(){2&this.f||(this.f|=2,this.o=S,S=this)};m.prototype.d=function(){this.f|=8,1&this.f||R(this)};m.prototype.dispose=function(){this.d()};function b(i,t){var e=new m(i,t);try{e.c()}catch(a){throw e.d(),a}var r=e.d.bind(e);return r[Symbol.dispose]=r,r}var H,C,W=[];b(function(){H=this.N})();function w(i,t){U[i]=t.bind(null,U[i]||function(){})}function T(i){C&&C(),C=i&&i.S()}function z(i){var t=this,e=i.data,r=lt(e);r.value=e;var a=it(function(){for(var d=t,h=t.__v;h=h.__;)if(h.__c){h.__c.__$f|=4;break}var c=G(function(){var _=r.value.value;return _===0?0:_===!0?"":_||""}),p=G(function(){return!Array.isArray(c.value)&&!et(c.value)}),g=b(function(){if(this.N=B,p.value){var _=c.value;d.__v&&d.__v.__e&&d.__v.__e.nodeType===3&&(d.__v.__e.data=_)}}),A=t.__$u.d;return t.__$u.d=function(){g(),A.call(this)},[p,c]},[]),n=a[0],s=a[1];return n.value?s.peek():s.value}z.displayName="ReactiveTextNode";Object.defineProperties(l.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:z},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}});w("__b",function(i,t){if(typeof t.type=="function"&&typeof window<"u"&&window.__PREACT_SIGNALS_DEVTOOLS__&&window.__PREACT_SIGNALS_DEVTOOLS__.exitComponent(),typeof t.type=="string"){var e,r=t.props;for(var a in r)if(a!=="children"){var n=r[a];n instanceof l&&(e||(t.__np=e={}),e[a]=n,r[a]=n.peek())}}i(t)});w("__r",function(i,t){if(typeof t.type=="function"&&typeof window<"u"&&window.__PREACT_SIGNALS_DEVTOOLS__&&window.__PREACT_SIGNALS_DEVTOOLS__.enterComponent(t),t.type!==rt){T();var e,r=t.__c;r&&(r.__$f&=-2,(e=r.__$u)===void 0&&(r.__$u=e=(function(a){var n;return b(function(){n=this}),n.c=function(){r.__$f|=1,r.setState({})},n})())),T(e)}i(t)});w("__e",function(i,t,e,r){typeof window<"u"&&window.__PREACT_SIGNALS_DEVTOOLS__&&window.__PREACT_SIGNALS_DEVTOOLS__.exitComponent(),T(),i(t,e,r)});w("diffed",function(i,t){typeof t.type=="function"&&typeof window<"u"&&window.__PREACT_SIGNALS_DEVTOOLS__&&window.__PREACT_SIGNALS_DEVTOOLS__.exitComponent(),T();var e;if(typeof t.type=="string"&&(e=t.__e)){var r=t.__np,a=t.props;if(r){var n=e.U;if(n)for(var s in n){var d=n[s];d!==void 0&&!(s in r)&&(d.d(),n[s]=void 0)}else n={},e.U=n;for(var h in r){var c=n[h],p=r[h];c===void 0?(c=ut(e,h,p,a),n[h]=c):c.o(p,a)}}}i(t)});function ut(i,t,e,r){var a=t in i&&i.ownerSVGElement===void 0,n=k(e);return{o:function(s,d){n.value=s,r=d},d:b(function(){this.N=B;var s=n.value.value;r[t]!==s&&(r[t]=s,a?i[t]=s:s?i.setAttribute(t,s):i.removeAttribute(t))})}}w("unmount",function(i,t){if(typeof t.type=="string"){var e=t.__e;if(e){var r=e.U;if(r){e.U=void 0;for(var a in r){var n=r[a];n&&n.d()}}}}else{var s=t.__c;if(s){var d=s.__$u;d&&(s.__$u=void 0,d.d())}}i(t)});w("__h",function(i,t,e,r){(r<3||r===9)&&(t.__$f|=2),i(t,e,r)});tt.prototype.shouldComponentUpdate=function(i,t){var e=this.__$u,r=e&&e.s!==void 0;for(var a in t)return!0;if(this.__f||typeof this.u=="boolean"&&this.u===!0){var n=2&this.__$f;if(!(r||n||4&this.__$f)||1&this.__$f)return!0}else if(!(r||4&this.__$f)||3&this.__$f)return!0;for(var s in i)if(s!=="__source"&&i[s]!==this.props[s])return!0;for(var d in this.props)if(!(d in i))return!0;return!1};function lt(i,t){return N(function(){return k(i,t)})[0]}var dt=function(i){queueMicrotask(function(){queueMicrotask(i)})};function ht(){at(function(){for(var i;i=W.shift();)H.call(i)})}function B(){W.push(this)===1&&(U.requestAnimationFrame||dt)(ht)}k(0);const J=k(""),V=(i,t)=>{const e=t.trim();return e.length<2?null:`https://api.themoviedb.org/3/search/${i}?api_key=403829fffc80d8184aa974d631a475c5&query=${encodeURIComponent(e)}`},ct=()=>{const[i,t]=N(""),[e,r]=N(""),[a,n]=N(!1),s=nt(null);O(()=>{const u=setTimeout(()=>{r(i)},400);return()=>{clearTimeout(u)}},[i]),O(()=>{const u=x=>{s.current&&!s.current.contains(x.target)&&n(!1)};return document.addEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u)}},[]),O(()=>{J.value=e},[e]);const d=u=>{const x=u.target.value;t(x),x.trim().length>=2?n(!0):n(!1)},h=()=>{e.trim().length>=2&&n(!0)},c=V("tv",e),p=V("movie",e),{data:g,isLoading:A,error:_}=D(c),{data:L,isLoading:K,error:X}=D(p),Y=a&&e.trim().length>=2;return f("div",{ref:s,className:"w-full relative",children:[f("form",{className:"w-full",children:[f("label",{for:"default-search",className:"mb-2 text-sm font-medium text-gray-900 sr-only dark:text-white",children:"Search"}),f("div",{className:"relative",children:[f("div",{className:"absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none",children:f(ot,{})}),f("input",{type:"search",id:"default-search",className:"block w-full p-4 ps-10 text-sm text-gray-900 border border-gray-300 rounded-full bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Search Movies, Series, anything...",onInput:d,onFocus:h,value:i,required:!0})]})]}),Y&&f("div",{className:"absolute z-10 w-full rounded-xl p-2 bg-blue-100 mt-1 max-h-[50vh] overflow-auto shadow-lg",id:"result",children:A||K?f("p",{children:"Loading..."}):_||X?f("p",{className:"text-red-500",children:"Error loading results"}):f("div",{className:"flex flex-col md:flex-row gap-2",children:[L&&f("div",{className:"flex flex-col gap-2 flex-1",children:L?.results?.map(u=>f(P,{id:u.id,poster_path:u.poster_path,title:u.title,mediaType:"movie",release_date:u.release_date,rating:u.vote_average}))}),g&&f("div",{className:"flex flex-col gap-2 flex-1",children:g.results.map(u=>f(P,{title:u.name,poster_path:u.poster_path,mediaType:"tv",id:u.id,release_date:u.first_air_date,rating:u.vote_average}))}),!L?.results?.length&&!g?.results?.length&&f("p",{className:"p-2 text-gray-500",children:"No results found"})]})})]})};function _t(){return f("article",{className:`${J.value?"p-4":"h-[70vh] flex flex-col items-center justify-center"}`,children:f(ct,{})})}export{_t as default};
